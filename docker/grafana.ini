# Grafana Configuration for Saler
# ================================

[DEFAULT]
# Global settings
instance_name = Saler Monitoring

[analytics]
# Google Analytics universal analytics
reporting_enabled = false
check_for_updates = true

[security]
# Admin user settings
admin_user = admin
admin_password = ${GRAFANA_PASSWORD}

# Security settings
secret_key = ${GRAFANA_SECRET_KEY}
disable_gravatar = true
data_source_proxy_whitelist = 

# Cookie settings
cookie_secure = true
cookie_samesite = strict

# Disable user registration
allow_sign_up = false

# CSP settings
content_security_policy = false

[databases]
# Database type
type = postgres
host = saler-postgres-service:5432
name = grafana
user = grafana
password = ${GRAFANA_DB_PASSWORD}
url = 

# Connection pool settings
max_idle_conn = 2
max_open_conn = 0
conn_max_lifetime = 14400

[session]
# Session provider
provider = file
provider_config = sessions

# Session timeout
cookie_secure = true
session_life_time = 86400

[dataproxy]
# Data proxy settings
timeout = 30
dialTimeout = 30
keep_alive = 30
tls_handshake_timeout = 10
expect_continue_timeout = 1
max_conns_per_host = 0
max_idle_connections = 100
idle_conn_timeout = 90

[logging]
# Logging configuration
mode = file
level = info
format = text

# Log file settings
loggers:
  default.mode = file
  default.level = info
  server.mode = file
  server.level = info
  query.mode = file
  query.level = info
  auth.mode = file
  auth.level = info
  apiserver.mode = file
  apiserver.level = info
  db.mode = file
  db.level = info
  migrations.mode = file
  migrations.level = info
  queryhistory.mode = file
  queryhistory.level = info
  searchdb.mode = file
  searchdb.level = info
  upgrade.mode = file
  upgrade.level = info
  provisioning.mode = file
  provisioning.level = info
  auth.anonymous.mode = file
  auth.anonymous.level = info
  auth.basic.mode = file
  auth.basic.level = info
  auth.email.mode = file
  auth.email.level = info
  plugins.mode = file
  plugins.level = info
  provisioning.datasources.mode = file
  provisioning.datasources.level = info
  provisioning.notifications.mode = file
  provisioning.notifications.level = info
  snaps.mode = file
  snaps.level = info

[log.file]
# File logging settings
path = /var/log/grafana/grafana.log
max_lines = 1000000
max_size_shift = 28
daily_rotate = true
max_days = 7

[smtp]
# SMTP settings for email alerts
enabled = true
host = ${SMTP_HOST}:${SMTP_PORT}
user = ${SMTP_USER}
password = ${SMTP_PASSWORD}
skip_verify = false
from_address = ${GRAFANA_FROM_ADDRESS}
from_name = Grafana
ehlo_identity = grafana

[emails]
# Email templates
welcome_email_on_sign_up = false
templates_pattern = emails/*.html

[rendering]
# Image rendering
server_url = 
callback_url = 
concurrent_render_request_limit = 30

[enterprise]
# Grafana Enterprise settings
license_text = ${GRAFANA_LICENSE_TEXT}

[feature_toggles]
# Feature toggles
enable = ngalert

[date_formats]
# Date format settings
full_date = MMM Do, YYYY
interval_second = HH:mm:ss
interval_minute = HH:mm
interval_hour = MM/DD HH:mm
interval_day = MM/DD
interval_month = YYYY-MM
interval_year = YYYY
use_browser_locale = false
default_timezone = browser

[alerting]
# Alerting settings
enabled = true
execute_alerts = true
error_or_timeout = alerting
numeric_undefined_in_nan_delta = nil

[unified_alerting]
# Unified Alerting (Grafana 8+)
enabled = true
disabled_orgs = 
admin_config_poll_interval = 60s
alertmanager_config_poll_interval = 60s
ha_listen_address = "0.0.0.0:9094"
ha_advertise_address = ""
ha_peers = ""
ha_peer_timeout = "15s"
ha_gossip_interval = "200ms"
ha_push_pull_interval = "60s"
max_attempts = 3
min_interval = "10s"
execute_alerts = true

[unified_alerting.screenshots]
# Screenshots configuration
capture = true
upload_external_image_storage = false

[unified_alerting.ruler]
# Ruler configuration
enable = true
poll_interval = "10s"
external_url = ""

[alertmanager]
# Alertmanager configuration
config_file_path = /etc/grafana/provisioning/alertmanager
enable = true
execute_alerts = true

[explore]
# Explore settings
enabled = true

[livesql]
# Live SQL settings
enabled = false

[local]
# Local settings
enable = false

[query_history]
# Query history settings
enabled = true

[search]
# Search settings
sort = true
hide_preconfigured_dashboards = false

[short_links]
# Short links settings
max_share_link_length = 10

[feature_flags]
# Feature flags
turnOnFeatureFlags = 

[panels]
# Panel settings
disable_sanitize_html = false

[dashboards]
# Dashboard settings
versions_to_keep = 20
auto_refresh_interval = "5s"

[dashboard_previews]
# Dashboard previews
max_thumbnail_size = 150000
max_preview_size = 500000

[metrics]
# Metrics settings
enabled = true
interval_seconds = 10
disable_total_stats = false

[metrics.environment_info]
# Environment info labels
instance_name = ${GRAFANA_INSTANCE_NAME}

[grafana_com]
# Grafana.com integration
url = https://grafana.com

[ldap]
# LDAP configuration
enabled = false
config_file = /etc/grafana/ldap.toml

[auth]
# Authentication settings
login_cookie_name = grafana_session
login_maximum_inactive_lifetime_duration = 
login_maximum_lifetime_duration = 
token_rotation_interval_minutes = 10
disable_login_form = false
disable_signout_menu = false
signout_redirect_url = 
oauth_auto_login = false
api_key_max_seconds_to_live = -1
csrf_always_check_policy = true
csrf_ignore_subdomains = false
csrf_always_process_action_header = false
security.encryption = 
security.encryption_datakey = 
security.encryption_datakey_id = 

[auth.anonymous]
# Anonymous access settings
enabled = false
org_name = Main Org.
org_role = Viewer
hide_version = true

[auth.github]
# GitHub OAuth
enabled = false
allow_sign_up = true
client_id = 
client_secret = 
scopes = user:email
auth_url = https://github.com/login/oauth/authorize
token_url = https://github.com/login/oauth/access_token
api_url = https://api.github.com/user
team_ids = 
allowed_organizations = 

[auth.google]
# Google OAuth
enabled = false
allow_sign_up = true
client_id = 
client_secret = 
scopes = https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email
auth_url = https://accounts.google.com/o/oauth2/v2/auth
token_url = https://oauth2.googleapis.com/token
api_url = https://www.googleapis.com/oauth2/v1/userinfo
allowed_domains = 
hosted_domain = 

[auth.azuread]
# Azure AD OAuth
enabled = false
name = Azure AD
allow_sign_up = true
client_id = 
client_secret = 
scopes = openid profile email
auth_url = https://login.microsoftonline.com/common/oauth2/v2.0/authorize
token_url = https://login.microsoftonline.com/common/oauth2/v2.0/token
api_url = 
allowed_domains = 
allowed_groups = 

[auth.grafana_com]
# Grafana.com OAuth
enabled = false
allow_sign_up = true
client_id = 
client_secret = 
scopes = 
allowed_organizations = 

[auth.okta]
# Okta OAuth
enabled = false
name = Okta
allow_sign_up = true
client_id = 
client_secret = 
scopes = openid profile email groups
auth_url = https://YOUR_DOMAIN.okta.com/oauth2/default/v1/authorize
token_url = https://YOUR_DOMAIN.okta.com/oauth2/default/v1/token
api_url = https://YOUR_DOMAIN.okta.com/oauth2/default/v1/userinfo
allowed_domains = 
groups_attribute_path = 
use_pkce = true

[auth.generic_oauth]
# Generic OAuth
enabled = false
name = OAuth
allow_sign_up = true
client_id = 
client_secret = 
scopes = 
email_attribute_name = email:primary
email_attribute_path = 
login_attribute_path = 
name_attribute_path = 
id_token_attribute_name = 
auth_url = 
token_url = 
api_url = 
teams_url = 
allowed_domains = 
team_ids = 
allowed_organizations = 
role_attribute_path = 
tls_skip_verify_insecure = false
tls_client_cert = 
tls_client_key = 
tls_client_ca = 
use_pkce = false

[auth.basic]
# Basic authentication
enabled = true

[auth.proxy]
# Auth proxy
enabled = false
header_name = X-WEBAUTH-USER
header_property = username
auto_sign_up = true
ldap_sync_ttl = 60
whitelist = 

[glance]
# Grafana Labs integration
enabled = false

[enterprise.license]
# Enterprise license
path = 

[external_image_storage]
# External image storage providers
provider = 

[external_image_storage.s3]
# S3 storage
endpoint = 
path_style_access = 
bucket = 
region = 
path = 
access_key = 
secret_key = 

[external_image_storage.webdav]
# WebDAV storage
url = 
username = 
password = 
public_url = 

[external_image_storage.gcs]
# Google Cloud Storage
key_file = 
bucket = 
path = 

[external_image_storage.azure_blob]
# Azure Blob storage
account_name = 
account_key = 
container_name = 

[external_image_storage.local]
# Local storage

[external_image_storage.metrics]
# Metrics image storage
enabled = false