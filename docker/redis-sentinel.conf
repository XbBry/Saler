# Redis Sentinel Configuration for Saler SaaS Platform
# High Availability and Failover Configuration

# Sentinel Configuration File
port 26379

# Logging
logfile /var/log/redis/sentinel.log
loglevel notice

# Working Directory
dir /tmp

# Sentinel Monitor Configuration
sentinel monitor mymaster redis-master 6379 2
sentinel auth-pass mymaster your_production_redis_password_here

# Failover Configuration
sentinel down-after-milliseconds mymaster 30000
sentinel parallel-syncs mymaster 1
sentinel failover-timeout mymaster 180000

# Notification Script (optional)
# This script is called when a failover occurs
# sentinel notification-script mymaster /var/redis/notify.sh

# Client Reconfiguration Script (optional)
# This script is called when a failover occurs to update client configurations
# sentinel client-reconfig-script mymaster /var/redis/reconfig.sh

# Security
protected-mode no

# Additional Sentinel Settings
sentinel deny-scripts-reconfig yes

# Resolution Settings
sentinel resolve-hostnames no
sentinel announce-hostnames no

# Modern Redis Sentinel Settings
sentinel monitor mymaster redis-master 6379 2 quorum 2

# Quick Failover Settings
sentinel down-after-milliseconds mymaster 30000  # 30 seconds
sentinel failover-timeout mymaster 180000       # 3 minutes
sentinel parallel-syncs mymaster 1              # One slave syncs at a time

# Notification Settings (if needed)
# sentinel notification-script mymaster /path/to/notification.sh
# sentinel client-reconfig-script mymaster /path/to/reconfig.sh

# Advanced Configuration
# Custom scripts for monitoring and alerting
# notification-script: Called when a failover occurs
# reconfig-script: Called to reconfigure clients after failover